### 기억장치 관리

> 기억장치 관리 전략 : 보조 기억 장치의 프로그램이나 데이터를 주기억장치에 적재시키는 시기, 적재 위치 등을 지정하여 한정된 주기억장치의 공간을 효율적으로 사용하기 위한 것

- 반입(Fetch) 전략 

  : 보조기억장치에 보관중인 프로그램이나 데이터를 언제 주기억장치로 적재할 것인지를 결정하는 전략으로, 요구반입, 예상반입이 있다

- 배치(Placement) 전략

  : 새로 반입되는 프로그램이나 데이터를 주기억장치의 어디에 위치시킬 것인지를 결정하는 전략

  - 최초 적합(First Fit) : 프로그램이나 데이터가 들어갈 수 있는 크기의 빈 영역 중에서 첫 번째 분할 영역에 배치
  - 최적 적합(Best Fit) : 프로그램이나 데이터가 들어갈 수 있는 크기의 빈 영역 중에서 단편화를 가장 작게 남기는 분할 영역에 배치
  - 최악 적합(Worst Fit) : 프로그램이나 데이터가 들어갈 수 있는 크기의 빈 영역 중에서 단편화를 가장 많이 남기는 분할 영역에 배치

- 교체 전략 

  : 주기억장치의 모든 영역이 이미 사용중인 상태에서 새로운 프로그램이나 데이터를 주기억장치에 배치하려고 할 때, 이미 사용되고 있는 영역 중에서 어느 영역을 교체하여 사용할 것인지를 결정하는 전략으로, FIFO, OPT, LRU, LFU, NUR, SCR 등이 있다. 



#### 주기억장치 할당

정의 : 프로세스를 수행하기 위해 주기억장치상의 가용 공간을 확보하는 기법

분류 : 연속 할당, 비연속 할당(분산 할당)

1. 연속할당

   : 주기억장치를 운영체제와 사용자 영역으로 나누어 한순간에는 오직 한 명의 사용자만이 주기억장치의 사용자 영역을 사용하는 기법

   - 단일 분할 할당 기법 : 주기억장치에 하나의 프로그램만 실행
     - 오버레이 기법 : 주기억장치보다 큰 프로그램 실행을 위하여, 하나의 프로그램을 여러 개의 조각으로 분할하여 주기억장치에 적재하여 프로그램 실행
     - 스와핑 기법 : 하나의 프로그램 전체를 주기억장치에 할당한 후 필요에 따라 다른 프로그램과 교체
   - 다중 분할 할당 기법 : 단일 분할 할당 기법에서 하나의 프로그램을 처리하기 위해 프로그램 실행을 위한 준비 시간과 실행된 프로그램을 종료하기 위한 제거 시간이 필요. CPU의 유휴 시간이 발생 
   - 고정 분할 할당 : 프로그램을 할당하기 전 운영체제가 주기억장치의 사용자 영역을 고정된 크기로 분할하고, 준비 상태 큐에서 준비 중인 프로그램을 각 영역에 할당하여 수행
   - 가변 분할 할당 : 각 작업이 필요한 만큼의 기억 장치를 할당받는 방법
있
2. 비연속 할당 : 프로그램과 데이터를 여러 개의 블록(페이지, 세그먼트)으로 분리하고, 이 블록들은 주기억장치 내의 어느 공간에도 적재할 수 있으며, 각 공간은 인접하지 않아도 됨



#### 단편화(Fragmentation)

- 단편화 : 분할된 주기억장치에 프로그램을 할당하고 반납하는 과정을 반복하면서 사용되지 않고 남는 기억장치의 빈 공간, 즉 조각이 발생하는 현상
- 내부 단편화 : 분할된 영역이 할당될 프로그램의 크기보다 크기 때문에 프로그램이 할당된 후 사용되지 않고 남아있는 빈 공간, 즉 분할된 공간 내의 단편화
- 외부 단편화 : 분할된 영역이 할당될 프로그램의 크기보다 작기 때문에 프로그램이 할당될 수 없어 사용되지 않고 빈공간으로 남아있는 영역, 즉 분할된 공간 자체의 단편화



#### 가상 기억장치(Virtual Memory)

- 보조기억장치(하드디스크)의 일부를 주기억장치처럼 사용하는 것으로, 용량이 작은 주기억장치를 마치 큰 용량을 가진 것처럼 사용하는 것으로, 현재 사용되는 운영체제에서 흔히 사용되는 기법이다

- 가상 기억장치 구현 기법

  - 페이징(Paging) 기법 : 가상 기억장치에 보관되어 있는 프로그램과 주기억장치의 영역을 동일한 크기로 나눈 후, 나눠진 프로그램(페이지)을 동일하게 나눠진 주기억장치의 영역에 적재시켜 실행하는 기법으로, 외부 단편화는 발생하지 않으나 내부 단편화는 발생할 수 있음
  - 세그먼테이션(Segmentation) 기법 : 가상 기억장치에 보관되어 있는 프로그램을 다양한 크기의 논리적인 단위로 나눈 후 주기억장치에 적재시켜 실행신키는 기법으로, 내부 단편화는 발생하지 않으나 외부 단편화는 발생할 수 있음

- 가상기억장치 기타 관리 사항

  - 국부성(Locality) 

    : 프로세스가 실행되는 동안 주기억장치를 참조할 때 일부 페이지만 집중적으로 참조하는 성질이 있다는 이론

    - 시간 구역성 : 프로세스가 실행되면서 하나의 페이지를 일정 시간 동안 집중적으로 액세스
    - 공간 구역성 : 프로세스 실행 시 일정 위치의 페이지를 집중적으로 액세스

  - 워킹 셋(Working Set) : 프로세스가 일정 시간 동안 자주 참조하는 페이지들의 집합

  - 페이지 부재(Page Fault) : 프로세스 실행 시 참조할 페이지가 주기억장치에 없는 현상으로, 페이지 부재가 일어나는 횟수를 페이지 부재 빈도라고 함

  - 스래싱(Thrashing) : 프로세스의 처리 시간보다 페이지 교체에 소요되는 시간이 더 많아지는 현상



#### 페이지 교체 알고리즘

- OPT(OPTimal replacement, 최적 교체) : 앞으로 가장 오랫동안 사용하지 않을 페이지를 교체
- FIFO(First in First Out) : 각 페이지가 주기억장치에 적대될 때마다 그때의 시간을 기억시켜 가장 먼저 들어와서 가장 오래 있었던 페이지를 교체
- LRU(Least Recently Used) : 최근에 가장 오랫동안 사용하지 않은 페이지를 교체
- LFU(Least Frequently Used) : 사용 빈도가 가장 적은 페이지를 교체
- NUR(Not Used Recently) : 최근에 사용하지 않은 페이지를 교체하는 기법으로, 참조 비트와 변형 비트가 사용됨
- SCR(Second Chance Replacement, 2차 기회 교체) : 가장 오랫동안 주기억장치에 있던 페이지 중 자주 사용되는 페이지의 교체를 방지하기 위한 것으로, FIFO 기법의 단점을 보완
